<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><link rel="stylesheet" type="text/css" href="//fonts.loli.net/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.4"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.4"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="stylesheet" type="text/css" href="https://unpkg.com/gitalk/dist/gitalk.css?v=2.0.4"><title>node资金系统 | ❤冰糖葫芦五加皮</title></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">node资金系统</h1><a id="logo" href="/.">❤冰糖葫芦五加皮</a><p class="description">我的记录板</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">node资金系统</h1><div class="post-meta"><a href="/2019/12/02/node资金系统/#comments" class="comment-count"></a><p><span class="date">Dec 02, 2019</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><p>（目前涉及到知识点盲区有：passport验证机制，Vuex，passport验证，token生成）</p>
<p>与教程不同的是，未涉及到 bcrypt加密解密和头像组件调用。</p>
<h1 id="1-实现的功能-和接口"><a href="#1-实现的功能-和接口" class="headerlink" title="1.实现的功能 和接口"></a>1.实现的功能 和接口</h1><table>
<thead>
<tr>
<th></th>
<th>method</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><code>/api/users/register</code></td>
<td>POST</td>
<td>用户注册</td>
<td></td>
</tr>
<tr>
<td><code>/api/users/login</code></td>
<td>POST</td>
<td>用户登录</td>
<td></td>
</tr>
<tr>
<td><code>/api/profiles</code></td>
<td>GET</td>
<td>show全部的profile数据信息</td>
<td>Authenticate认证</td>
</tr>
<tr>
<td><code>/api/profiles/add</code></td>
<td>POST</td>
<td>添加新的profile信息</td>
<td>Authenticate认证</td>
</tr>
<tr>
<td>/api/profiles/edit/:id</td>
<td>POST</td>
<td>编辑指定id的profile信息</td>
<td>Authenticate认证</td>
</tr>
<tr>
<td>/api/profiles/delete/:id</td>
<td>DELETE</td>
<td>删除指定id的peofile信息</td>
<td>Authenticate认证</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>UI框架：ElementUI</p>
<p>数据库：MongoDB</p>
<p>后台搭建：NodeJS-Express</p>
<h1 id="2-后端文件："><a href="#2-后端文件：" class="headerlink" title="2.后端文件："></a>2.后端文件：</h1><h2 id="2-用户功能："><a href="#2-用户功能：" class="headerlink" title="2.用户功能："></a>2.用户功能：</h2><h3 id="1-注册"><a href="#1-注册" class="headerlink" title="1.注册"></a>1.注册</h3><p><code>/api/users/register</code></p>
<p>方法： <strong>POST</strong></p>
<p>根据注册使用的邮箱查找数据，若无则成功注册。若有，返回”该邮箱已被注册”提示。注册成功之后保存到mongodb数据库中。并提示注册成功，跳转到 『登录页』</p>
<p>代码部分：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="comment">// const mongoose = require("mongoose");</span></span><br><span class="line"><span class="keyword">const</span> routers = express.Router();</span><br><span class="line"><span class="comment">// 引入 用户数据库模型文件</span></span><br><span class="line"><span class="keyword">const</span> User = <span class="built_in">require</span>(<span class="string">'../models/Users'</span>);</span><br><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">'jsonwebtoken'</span>);</span><br><span class="line"></span><br><span class="line">routers</span><br><span class="line">	.post(<span class="string">'/register'</span>,(req,res)=&gt;&#123;</span><br><span class="line">        <span class="comment">// 1. 注册，检测账号是否重复 </span></span><br><span class="line">        User.findOne(&#123;<span class="attr">email</span>:req.body.email&#125;)</span><br><span class="line">            .then(<span class="function">(<span class="params">user</span>)=&gt;</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(user) <span class="keyword">return</span> res.status(<span class="number">400</span>).json(<span class="string">"邮箱已被占用"</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">const</span> newUser = <span class="keyword">new</span> User(&#123;</span><br><span class="line">                    name:req.body.name,</span><br><span class="line">                    email:req.body.email,</span><br><span class="line">                    password:req.body.password,</span><br><span class="line">                    identity:req.body.identity,</span><br><span class="line">                    date:<span class="keyword">new</span> <span class="built_in">Date</span>().toLocaleString()</span><br><span class="line">                &#125;);</span><br><span class="line">                newUser.save().then(<span class="function"><span class="params">user</span>=&gt;</span>&#123;res.json(user)&#125;).catch(<span class="function"><span class="params">err</span>=&gt;</span><span class="built_in">console</span>.log(err))</span><br><span class="line"></span><br><span class="line">            &#125;)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<h3 id="2-登录"><a href="#2-登录" class="headerlink" title="2.登录"></a>2.登录</h3><p><code>/api/users/login</code></p>
<p>方法：<strong>POST</strong></p>
<p>条件1：邮箱   条件2：密码。先核对邮箱，是否存在，不存在提示：“输入账号不存在”,存在再验证密码。密码验证无误之后，为该用户添加token令牌，提示登陆成功，跳转到 『 首页 (/index) 』</p>
<p>代码部分：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 前期导入模块和 注册模块 一致</span></span><br><span class="line">router.post(<span class="string">'/login'</span>,(req,res)=&gt;&#123;</span><br><span class="line">        <span class="comment">// console.log(req.body)</span></span><br><span class="line">        <span class="keyword">const</span> email = req.body.email;</span><br><span class="line">        <span class="keyword">const</span> password = req.body.password;</span><br><span class="line"></span><br><span class="line">        User.findOne(&#123;email&#125;)</span><br><span class="line">            .then(<span class="function"><span class="params">user</span>=&gt;</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(!user) <span class="keyword">return</span> res.status(<span class="number">404</span>).json(<span class="string">"用户不存在"</span>)</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 验证密码 </span></span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">parseInt</span>(user.password) == <span class="built_in">parseInt</span>(password))&#123;</span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">const</span> rule = &#123;</span><br><span class="line">                        id:user._id,</span><br><span class="line">                        name:user.name,</span><br><span class="line">                        identity:user.identity</span><br><span class="line">                    &#125;;</span><br><span class="line"></span><br><span class="line">                    jwt.sign(rule,<span class="string">"secret"</span>,&#123;<span class="attr">expiresIn</span>:<span class="number">3600</span>&#125;,(err,token)=&gt;&#123;</span><br><span class="line">                        <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">                        res.json(&#123;</span><br><span class="line">                            success:<span class="literal">true</span>,</span><br><span class="line">                            token:<span class="string">'Bearer '</span>+token</span><br><span class="line">                        &#125;)</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;;</span><br><span class="line"></span><br><span class="line">            &#125;)</span><br><span class="line">            .catch(<span class="function"><span class="params">err</span>=&gt;</span>res.status(<span class="number">404</span>).json(&#123;</span><br><span class="line">                success:<span class="literal">false</span></span><br><span class="line">            &#125;))</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<h3 id="3-知识盲区"><a href="#3-知识盲区" class="headerlink" title="3.知识盲区"></a><strong>3.知识盲区</strong></h3><h4 id="1-jsonwebtoken的使用"><a href="#1-jsonwebtoken的使用" class="headerlink" title="1.jsonwebtoken的使用"></a>1.jsonwebtoken的使用</h4><p>jwt.sign(规则,”secret”,过期时间,(err,token)=&gt;{…})`</p>
<p>token生成的机制及使用配置方法：</p>
<h4 id="2-POST获取参数的中间件body-parser使用"><a href="#2-POST获取参数的中间件body-parser使用" class="headerlink" title="2.POST获取参数的中间件body-parser使用"></a>2.POST获取参数的中间件body-parser使用</h4><h2 id="MongoDB数据存储部分"><a href="#MongoDB数据存储部分" class="headerlink" title="MongoDB数据存储部分"></a>MongoDB数据存储部分</h2><p>因为无需提前新建空白集合，我们只需要配置数据模型文件，插入第一个新的document就会生成对应的数据集合。</p>
<p>按照类别分别使用不同的规则放在不同的文件中，导出即可。</p>
<p>用户数据集合：（Users.js）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>);</span><br><span class="line"><span class="keyword">const</span> Schema = mongoose.Schema;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> UserSchema = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line">    name:&#123;</span><br><span class="line">        type:<span class="built_in">String</span>,</span><br><span class="line">        required:<span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    password:&#123;</span><br><span class="line">        type:<span class="built_in">String</span>,</span><br><span class="line">        required:<span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    email:&#123;</span><br><span class="line">        type:<span class="built_in">String</span>,</span><br><span class="line">        required:<span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    date:&#123;</span><br><span class="line">        type:<span class="built_in">String</span></span><br><span class="line">    &#125;,</span><br><span class="line">    identity:&#123;</span><br><span class="line">        type:<span class="built_in">String</span>,</span><br><span class="line">        required:<span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">module</span>.exports = User = mongoose.model(<span class="string">"users"</span>,UserSchema);</span><br></pre></td></tr></table></figure>

<p>信息数据集合：（Profile.js）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>);</span><br><span class="line"><span class="keyword">const</span> Schema = mongoose.Schema;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ProfileSchema = <span class="keyword">new</span> Schema(&#123;</span><br><span class="line">    <span class="comment">// 1. 操作类型：出/入/报废/   2.型号  3.尺码  4.颜色  5.时间 6.备注</span></span><br><span class="line">    operationType:&#123;</span><br><span class="line">        type:<span class="built_in">String</span>,</span><br><span class="line">        required:<span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    type:&#123;</span><br><span class="line">        type:<span class="built_in">String</span>,</span><br><span class="line">        required:<span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    size:&#123;</span><br><span class="line">        type:<span class="built_in">String</span>,</span><br><span class="line">        required:<span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    color:&#123;</span><br><span class="line">        type:<span class="built_in">String</span>,</span><br><span class="line">        required:<span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    cdate:&#123;</span><br><span class="line">        type:<span class="built_in">String</span>,</span><br><span class="line">        required:<span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    remark:&#123;</span><br><span class="line">        type:<span class="built_in">String</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">module</span>.exports = Profile = mongoose.model(<span class="string">"profiles"</span>,ProfileSchema);</span><br></pre></td></tr></table></figure>

<h2 id="后台主函数app-js"><a href="#后台主函数app-js" class="headerlink" title="后台主函数app.js"></a>后台主函数app.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.express</span></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>);</span><br><span class="line"><span class="comment">// 2.mongoose 连接数据库</span></span><br><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>);</span><br><span class="line">mongoose.set(<span class="string">'useFindAndModify'</span>, <span class="literal">false</span>)</span><br><span class="line"><span class="comment">// 2.1 获取数据库地址及参数文件 </span></span><br><span class="line"><span class="keyword">const</span> dbUrl = <span class="built_in">require</span>(<span class="string">'./config/key'</span>).mongoURL;</span><br><span class="line"><span class="comment">// passport</span></span><br><span class="line"><span class="keyword">const</span> passport = <span class="built_in">require</span>(<span class="string">'passport'</span>)</span><br><span class="line"><span class="comment">// 3.post 读取参数中间件 </span></span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">"body-parser"</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;))</span><br><span class="line">app.use(bodyParser.json())</span><br><span class="line"><span class="comment">// 导入路由文件，加上类型前缀  使用.use 方法，区分不同功能API</span></span><br><span class="line"><span class="keyword">const</span>  profile = <span class="built_in">require</span>(<span class="string">"./routes/profile"</span>);</span><br><span class="line"><span class="keyword">const</span>  users = <span class="built_in">require</span>(<span class="string">"./routes/user"</span>);</span><br><span class="line"><span class="comment">// 使用路由 api</span></span><br><span class="line">app.use(<span class="string">'/api/profile'</span>,profile);</span><br><span class="line">app.use(<span class="string">'/api/user'</span>,users);</span><br><span class="line"></span><br><span class="line">app.use(passport.initialize())</span><br><span class="line"><span class="built_in">require</span>(<span class="string">"./config/passport"</span>)(passport);</span><br><span class="line"><span class="comment">// 2.1 mongoose 连接并测试</span></span><br><span class="line">mongoose.connect(dbUrl,&#123; <span class="attr">useNewUrlParser</span>: <span class="literal">true</span>,<span class="attr">useUnifiedTopology</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">        .then(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"数据库连接成功"</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">`数据库连接错误<span class="subst">$&#123;err&#125;</span>`</span>);</span><br><span class="line">        &#125;);</span><br><span class="line"><span class="comment">// 设置端口</span></span><br><span class="line"><span class="keyword">const</span> port = process.env.PORT || <span class="number">3000</span>;</span><br><span class="line"><span class="comment">// 测试路径</span></span><br><span class="line">app.get(<span class="string">'/'</span>,(req,res)=&gt;&#123;</span><br><span class="line">    res.send(<span class="string">"hello world!"</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(port,(err)=&gt;&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`端口已经在<span class="subst">$&#123;port&#125;</span>端口打开`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="3-前端文件"><a href="#3-前端文件" class="headerlink" title="3.前端文件"></a>3.前端文件</h1><p>使用 <code>@vue/cli 4</code> 生成的Vue 模板文件，默认的包括router，Vuex，需要注意的是，因为会调用后端接口，为解决跨域问题，需自建<code>vue.config.js</code> 配置文件，设置proxy参数。</p>
<h2 id="配置文件："><a href="#配置文件：" class="headerlink" title="配置文件："></a>配置文件：</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> debug = process.env.NODE_ENV !== <span class="string">'production'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    publicPath: <span class="string">'/'</span>, <span class="comment">// 根域上下文目录</span></span><br><span class="line">    outputDir: <span class="string">'dist'</span>, <span class="comment">// 构建输出目录</span></span><br><span class="line">    assetsDir: <span class="string">'assets'</span>, <span class="comment">// 静态资源目录 (js, css, img, fonts)</span></span><br><span class="line">    lintOnSave: <span class="literal">false</span>, <span class="comment">// 是否开启eslint保存检测，有效值：ture | false | 'error'</span></span><br><span class="line">    runtimeCompiler: <span class="literal">true</span>, <span class="comment">// 运行时版本是否需要编译</span></span><br><span class="line">    transpileDependencies: [], <span class="comment">// 默认babel-loader忽略mode_modules，这里可增加例外的依赖包名</span></span><br><span class="line">    productionSourceMap: <span class="literal">true</span>, <span class="comment">// 是否在构建生产包时生成 sourceMap 文件，false将提高构建速度</span></span><br><span class="line">    configureWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123; <span class="comment">// webpack配置，值位对象时会合并配置，为方法时会改写配置</span></span><br><span class="line">        <span class="keyword">if</span> (debug) &#123; <span class="comment">// 开发环境配置</span></span><br><span class="line">            config.devtool = <span class="string">'cheap-module-eval-source-map'</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// 生产环境配置</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Object.assign(config, &#123; // 开发生产共同配置</span></span><br><span class="line">        <span class="comment">//     resolve: &#123;</span></span><br><span class="line">        <span class="comment">//         alias: &#123;</span></span><br><span class="line">        <span class="comment">//             '@': path.resolve(__dirname, './src'),</span></span><br><span class="line">        <span class="comment">//             '@c': path.resolve(__dirname, './src/components'),</span></span><br><span class="line">        <span class="comment">//             'vue$': 'vue/dist/vue.esm.js'</span></span><br><span class="line">        <span class="comment">//         &#125;</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">// &#125;)</span></span><br><span class="line">    &#125;,</span><br><span class="line">    chainWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123; <span class="comment">// webpack链接API，用于生成和修改webapck配置，https://github.com/vuejs/vue-cli/blob/dev/docs/webpack.md</span></span><br><span class="line">        <span class="comment">// if (debug) &#123;</span></span><br><span class="line">        <span class="comment">//     // 本地开发配置</span></span><br><span class="line">        <span class="comment">// &#125; else &#123;</span></span><br><span class="line">        <span class="comment">//     // 生产开发配置</span></span><br><span class="line">        <span class="comment">//&#125;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    parallel: <span class="built_in">require</span>(<span class="string">'os'</span>).cpus().length &gt; <span class="number">1</span>, <span class="comment">// 构建时开启多进程处理babel编译</span></span><br><span class="line">    pluginOptions: &#123; <span class="comment">// 第三方插件配置</span></span><br><span class="line">    &#125;,</span><br><span class="line">    pwa: &#123; <span class="comment">// 单页插件相关配置 https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-pwa</span></span><br><span class="line">    &#125;,</span><br><span class="line">    devServer: &#123;</span><br><span class="line">        open: <span class="literal">true</span>,</span><br><span class="line">        host: <span class="string">'localhost'</span>,</span><br><span class="line">        port: <span class="number">8080</span>,</span><br><span class="line">        https: <span class="literal">false</span>,</span><br><span class="line">        hotOnly: <span class="literal">false</span>,</span><br><span class="line">        proxy: &#123; <span class="comment">// 配置跨域</span></span><br><span class="line">            <span class="string">'/api'</span>: &#123;</span><br><span class="line">                target: <span class="string">'http://localhost:3000/api/'</span>,<span class="comment">// 后端接口视自己的而定</span></span><br><span class="line">                ws: <span class="literal">true</span>,</span><br><span class="line">                changOrigin: <span class="literal">true</span>,</span><br><span class="line">                pathRewrite: &#123;</span><br><span class="line">                    <span class="string">'^/api'</span>: <span class="string">''</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        before: <span class="function"><span class="params">app</span> =&gt;</span> &#123; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="入口函数部分main-js："><a href="#入口函数部分main-js：" class="headerlink" title="入口函数部分main.js："></a>入口函数部分main.js：</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store'</span></span><br><span class="line"><span class="keyword">import</span> ElementUI <span class="keyword">from</span> <span class="string">'element-ui'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'element-ui/lib/theme-chalk/index.css'</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'../src/http'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line">Vue.use(ElementUI);</span><br><span class="line">Vue.prototype.$axios = axios;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>)</span><br></pre></td></tr></table></figure>

<p>UI 框架为ElementUI，在app.js中先导入配置</p>
<h2 id="根组件App-vue"><a href="#根组件App-vue" class="headerlink" title="根组件App.vue"></a>根组件App.vue</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">    &lt;router-view&gt;<span class="xml"><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> jwt_decode <span class="keyword">from</span> <span class="string">'jwt-decode'</span></span><br><span class="line">                                                            </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    name:<span class="string">"app"</span>,</span><br><span class="line">    created() &#123;</span><br><span class="line">      <span class="keyword">if</span>(localStorage.eletoken)&#123;</span><br><span class="line">        <span class="keyword">const</span> decoded = jwt_decode(localStorage.eletoken);</span><br><span class="line">        <span class="comment">// 存储到Vuex</span></span><br><span class="line">        <span class="keyword">this</span>.$store.dispatch(<span class="string">"setAuthenticated"</span>,!<span class="keyword">this</span>.isEmpty(decoded))</span><br><span class="line">        <span class="keyword">this</span>.$store.dispatch(<span class="string">"setUser"</span>,decoded)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="comment">// 判断值是否为空</span></span><br><span class="line">        isEmpty(value)&#123;</span><br><span class="line">            <span class="keyword">return</span>(</span><br><span class="line">                value === <span class="literal">undefined</span>||</span><br><span class="line">                value===<span class="literal">null</span>||</span><br><span class="line">                (<span class="keyword">typeof</span> value===<span class="string">"object"</span> &amp;&amp; <span class="built_in">Object</span>.keys(value).length === <span class="number">0</span>)||</span><br><span class="line">                (<span class="keyword">typeof</span> value===<span class="string">"string"</span> &amp;&amp; value.trim().length === <span class="number">0</span>)</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;style scoped&gt;</span></span><br><span class="line"><span class="regexp">  #app&#123;</span></span><br><span class="line"><span class="regexp">    width:100%;</span></span><br><span class="line"><span class="regexp">    height:100%;</span></span><br><span class="line"><span class="regexp">    overflow: hidden;</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure>

<p>created()中是为了解决刷新Vuex中state清空的问题，因为 localStorage.eletoken中的数据除非手动清除不然会一直存在，登录了之后localStorage.eletoken会一直在，所有Vuex中的state根据 localStorage.eletoken校正即可。</p>
<h2 id="页面展示views"><a href="#页面展示views" class="headerlink" title="页面展示views"></a>页面展示views</h2><h3 id="1-注册页"><a href="#1-注册页" class="headerlink" title="1.注册页"></a>1.注册页</h3><p>使用了ElementUI的表单模块，需要定义校验规则rules，在提交按钮绑定注册事件，调用注册接口，注册完成之后 <code>this.$router.push(&#39;/login&#39;);</code></p>
<p>代码部分：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"register"</span>&gt;</span><br><span class="line">        &lt;section <span class="class"><span class="keyword">class</span></span>=<span class="string">"form_container"</span>&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"manage_tip"</span>&gt;</span><br><span class="line">                &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"title"</span>&gt;SUNUGG在线查询操作系统&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-form </span><br><span class="line">                :model=<span class="string">"registerUser"</span> </span><br><span class="line">                status-icon </span><br><span class="line">                :rules=<span class="string">"rules"</span> </span><br><span class="line">                ref=<span class="string">"registerForm"</span> </span><br><span class="line">                label-width=<span class="string">"100px"</span> </span><br><span class="line">                <span class="class"><span class="keyword">class</span></span>=<span class="string">"registerForm"</span>&gt;</span><br><span class="line">                &lt;el-form-item label=<span class="string">"用户名"</span> prop=<span class="string">"name"</span>&gt;</span><br><span class="line">                    &lt;el-input </span><br><span class="line">                        v-model=<span class="string">"registerUser.name"</span> </span><br><span class="line">                        placeholder=<span class="string">"请输入用户名"</span></span><br><span class="line">                        &gt;<span class="xml"><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line">                &lt;<span class="regexp">/el-form-item&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">                &lt;el-form-item label="邮箱" prop="email"&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;el-input </span></span><br><span class="line"><span class="regexp">                        v-model="registerUser.email" </span></span><br><span class="line"><span class="regexp">                        placeholder="请输入邮箱"</span></span><br><span class="line"><span class="regexp">                        &gt;&lt;/</span>el-input&gt;</span><br><span class="line">                &lt;<span class="regexp">/el-form-item&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">                &lt;el-form-item label="密码" prop="password"&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;el-input </span></span><br><span class="line"><span class="regexp">                        type="password"</span></span><br><span class="line"><span class="regexp">                        v-model="registerUser.password"</span></span><br><span class="line"><span class="regexp">                        placeholder="请输入密码"</span></span><br><span class="line"><span class="regexp">                        &gt;&lt;/</span>el-input&gt;</span><br><span class="line">                &lt;<span class="regexp">/el-form-item&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">                &lt;el-form-item label="确认密码" prop="password2"&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;el-input </span></span><br><span class="line"><span class="regexp">                        type="password"</span></span><br><span class="line"><span class="regexp">                        v-model="registerUser.password2"</span></span><br><span class="line"><span class="regexp">                        placeholder="请输入确认密码"</span></span><br><span class="line"><span class="regexp">                        &gt;&lt;/</span>el-input&gt;</span><br><span class="line">                &lt;<span class="regexp">/el-form-item&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">                &lt;el-form-item label="身份"&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;el-select</span></span><br><span class="line"><span class="regexp">                        v-model="registerUser.identity"</span></span><br><span class="line"><span class="regexp">                        placeholder="请选择身份"</span></span><br><span class="line"><span class="regexp">                    &gt;</span></span><br><span class="line"><span class="regexp">                        &lt;el-option lebel="管理员" value="manager"&gt;&lt;/</span>el-option&gt;</span><br><span class="line">                        &lt;el-option lebel=<span class="string">"员工"</span> value=<span class="string">"employer"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span></span><br><span class="line">                    &lt;<span class="regexp">/el-select&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>el-form-item&gt;</span><br><span class="line"></span><br><span class="line">                &lt;el-form-item&gt;</span><br><span class="line">                    &lt;el-button </span><br><span class="line">                        type=<span class="string">"primary"</span> </span><br><span class="line">                        @click=<span class="string">"submitForm('registerForm')"</span></span><br><span class="line">                        <span class="class"><span class="keyword">class</span></span>=<span class="string">"registerBtn"</span></span><br><span class="line">                        &gt;注册&lt;<span class="regexp">/el-button&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>el-form-item&gt;</span><br><span class="line">            </span><br><span class="line">            &lt;<span class="regexp">/el-form&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>section&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    name:<span class="string">"register"</span>,</span><br><span class="line">    data() &#123;</span><br><span class="line">        <span class="comment">// 定义 确认密码和密码知否相同</span></span><br><span class="line">        <span class="keyword">var</span> validatePass2 = <span class="function">(<span class="params">rule,value,callback</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(value !==<span class="keyword">this</span>.registerUser.password)&#123;</span><br><span class="line">                callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'两次输入的密码不一致！'</span>))</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                callback();</span><br><span class="line">            &#125;      </span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            registerUser:&#123;</span><br><span class="line">                name:<span class="string">""</span>,</span><br><span class="line">                email:<span class="string">""</span>,</span><br><span class="line">                password:<span class="string">""</span>,</span><br><span class="line">                password2:<span class="string">""</span>,</span><br><span class="line">                identity:<span class="string">""</span></span><br><span class="line">            &#125;,</span><br><span class="line">            rules:&#123;</span><br><span class="line">                name:[</span><br><span class="line">                    &#123;<span class="attr">required</span>:<span class="literal">true</span>,<span class="attr">message</span>:<span class="string">"不能为空"</span>,<span class="attr">trigger</span>:<span class="string">'blur'</span>&#125;,</span><br><span class="line">                    &#123;<span class="attr">min</span>:<span class="number">2</span>,<span class="attr">max</span>:<span class="number">30</span>,<span class="attr">message</span>:<span class="string">"长度在2到30个字符之间"</span>&#125;</span><br><span class="line">                ],</span><br><span class="line">                email:[</span><br><span class="line">                    &#123;<span class="attr">required</span>:<span class="literal">true</span>,<span class="attr">message</span>:<span class="string">"不能为空"</span>,<span class="attr">trigger</span>:<span class="string">'blur'</span>,<span class="attr">type</span>:<span class="string">"email"</span>&#125;,</span><br><span class="line"></span><br><span class="line">                ],</span><br><span class="line">                password:[</span><br><span class="line">                    &#123;<span class="attr">required</span>:<span class="literal">true</span>,<span class="attr">message</span>:<span class="string">"不能为空"</span>,<span class="attr">trigger</span>:<span class="string">'blur'</span>&#125;,</span><br><span class="line">                    &#123;<span class="attr">min</span>:<span class="number">6</span>,<span class="attr">max</span>:<span class="number">30</span>,<span class="attr">message</span>:<span class="string">"长度在6到30个字符之间"</span>,<span class="attr">trigger</span>:<span class="string">'blur'</span>&#125;</span><br><span class="line">                ],</span><br><span class="line">                password2:[</span><br><span class="line">                    &#123;<span class="attr">required</span>:<span class="literal">true</span>,<span class="attr">message</span>:<span class="string">"不能为空"</span>,<span class="attr">trigger</span>:<span class="string">'blur'</span>&#125;,</span><br><span class="line">                    &#123;<span class="attr">validator</span>:validatePass2,<span class="attr">trigger</span>:<span class="string">'blur'</span>&#125;</span><br><span class="line">                ],</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        submitForm(formName) &#123;</span><br><span class="line">            <span class="keyword">this</span>.$refs[formName].validate(<span class="function"><span class="params">valid</span>=&gt;</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(valid)&#123;</span><br><span class="line">                    <span class="keyword">this</span>.$axios.post(<span class="string">"/api/user/register"</span>,<span class="keyword">this</span>.registerUser)</span><br><span class="line">                        .then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">                            <span class="keyword">this</span>.$message(&#123;</span><br><span class="line">                                message:<span class="string">"注册成功"</span>,</span><br><span class="line">                                type:<span class="string">"success"</span></span><br><span class="line">                            &#125;);</span><br><span class="line">                        &#125;);</span><br><span class="line">                    </span><br><span class="line">                <span class="keyword">this</span>.$router.push(<span class="string">'/login'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;style scoped&gt;</span></span><br><span class="line"><span class="regexp">    .register&#123;</span></span><br><span class="line"><span class="regexp">        position: relative;</span></span><br><span class="line"><span class="regexp">        width: 100%;</span></span><br><span class="line"><span class="regexp">        height: 100%;</span></span><br><span class="line"><span class="regexp">        background:url("../</span>assets/images/bg.jpg<span class="string">");</span></span><br><span class="line"><span class="string">        background-size: 100% 100%;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .form_container&#123;</span></span><br><span class="line"><span class="string">        width: 370px;</span></span><br><span class="line"><span class="string">        height: 210px;</span></span><br><span class="line"><span class="string">        position: absolute;</span></span><br><span class="line"><span class="string">        top: 10%;</span></span><br><span class="line"><span class="string">        left: 34%;</span></span><br><span class="line"><span class="string">        padding: 25px;</span></span><br><span class="line"><span class="string">        border-radius: 5px;</span></span><br><span class="line"><span class="string">        text-align: center;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .form_container .manage_tip .title&#123;</span></span><br><span class="line"><span class="string">        font-family: 'Microsoft YaHei';</span></span><br><span class="line"><span class="string">        font-weight: bold;</span></span><br><span class="line"><span class="string">        font-size: 26px;</span></span><br><span class="line"><span class="string">        color: #fff;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    /* 表单样式 */</span></span><br><span class="line"><span class="string">    .registerForm&#123;</span></span><br><span class="line"><span class="string">        margin-top:20px;</span></span><br><span class="line"><span class="string">        background-color:#fff;</span></span><br><span class="line"><span class="string">        padding:20px 40px 20px 20px;</span></span><br><span class="line"><span class="string">        border-radius:5px;</span></span><br><span class="line"><span class="string">        box-shadow:0px 5px 10px #cccc;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .registerBtn&#123;</span></span><br><span class="line"><span class="string">        width:100%;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&lt;/style&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-登录页"><a href="#2-登录页" class="headerlink" title="2.登录页"></a>2.登录页</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"login"</span>&gt;</span><br><span class="line">        &lt;section <span class="class"><span class="keyword">class</span></span>=<span class="string">"form_container"</span>&gt;</span><br><span class="line">            &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"manage_tip"</span>&gt;</span><br><span class="line">                &lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"title"</span>&gt;SUNUGG在线查询操作系统&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line"></span><br><span class="line">            &lt;el-form </span><br><span class="line">                :model=<span class="string">"loginUser"</span> </span><br><span class="line">                status-icon </span><br><span class="line">                :rules=<span class="string">"rules"</span> </span><br><span class="line">                ref=<span class="string">"loginForm"</span> </span><br><span class="line">                label-width=<span class="string">"100px"</span> </span><br><span class="line">                <span class="class"><span class="keyword">class</span></span>=<span class="string">"loginForm"</span>&gt;</span><br><span class="line">                </span><br><span class="line"></span><br><span class="line">                &lt;el-form-item label=<span class="string">"邮箱"</span> prop=<span class="string">"email"</span>&gt;</span><br><span class="line">                    &lt;el-input </span><br><span class="line">                        v-model=<span class="string">"loginUser.email"</span> </span><br><span class="line">                        placeholder=<span class="string">"请输入邮箱"</span></span><br><span class="line">                        &gt;<span class="xml"><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line">                &lt;<span class="regexp">/el-form-item&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">                &lt;el-form-item label="密码" prop="password"&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;el-input </span></span><br><span class="line"><span class="regexp">                        type="password"</span></span><br><span class="line"><span class="regexp">                        v-model="loginUser.password"</span></span><br><span class="line"><span class="regexp">                        placeholder="请输入密码"</span></span><br><span class="line"><span class="regexp">                        &gt;&lt;/</span>el-input&gt;</span><br><span class="line">                &lt;<span class="regexp">/el-form-item&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">                &lt;el-form-item&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;el-button </span></span><br><span class="line"><span class="regexp">                        type="primary" </span></span><br><span class="line"><span class="regexp">                        @click="submitForm('loginForm')"</span></span><br><span class="line"><span class="regexp">                        class="loginBtn"</span></span><br><span class="line"><span class="regexp">                        &gt;登录&lt;/</span>el-button&gt;</span><br><span class="line">                &lt;<span class="regexp">/el-form-item&gt;</span></span><br><span class="line"><span class="regexp">                &lt;p&gt;还没有账号？去&lt;router-link to="/</span>register<span class="string">"&gt;注册&lt;/router-link&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">            &lt;/el-form&gt;</span></span><br><span class="line"><span class="string">        &lt;/section&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/template&gt;</span></span><br><span class="line"><span class="string">&lt;script&gt;</span></span><br><span class="line"><span class="string">import jwt_decode from 'jwt-decode'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">export default &#123;</span></span><br><span class="line"><span class="string">    name:"</span>login<span class="string">",</span></span><br><span class="line"><span class="string">    data() &#123;</span></span><br><span class="line"><span class="string">        return &#123;</span></span><br><span class="line"><span class="string">            loginUser:&#123;</span></span><br><span class="line"><span class="string">                email:"</span><span class="string">",</span></span><br><span class="line"><span class="string">                password:"</span><span class="string">"</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">            rules:&#123;</span></span><br><span class="line"><span class="string">                name:&#123;&#125;,</span></span><br><span class="line"><span class="string">                password:&#123;&#125;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    methods: &#123;</span></span><br><span class="line"><span class="string">        submitForm:function(formName)&#123;</span></span><br><span class="line"><span class="string">            this.$refs[formName].validate(valid=&gt;&#123;</span></span><br><span class="line"><span class="string">                if(valid)&#123;</span></span><br><span class="line"><span class="string">                    this.$axios.post("</span>/api/user/login<span class="string">",this.loginUser)</span></span><br><span class="line"><span class="string">                        .then(res=&gt;&#123;</span></span><br><span class="line"><span class="string">                            this.$message(&#123;</span></span><br><span class="line"><span class="string">                                message:"</span>登录成功<span class="string">",</span></span><br><span class="line"><span class="string">                                type:"</span>success<span class="string">"</span></span><br><span class="line"><span class="string">                            &#125;);</span></span><br><span class="line"><span class="string">                            // 拿到 token</span></span><br><span class="line"><span class="string">                            const &#123;token&#125;  = res.data;</span></span><br><span class="line"><span class="string">                            localStorage.setItem('eletoken',token);</span></span><br><span class="line"><span class="string">                            </span></span><br><span class="line"><span class="string">                            // 解析token</span></span><br><span class="line"><span class="string">                            const decoded = jwt_decode(token)</span></span><br><span class="line"><span class="string">                            console.log(decoded);</span></span><br><span class="line"><span class="string">                            // 存储到Vuex </span></span><br><span class="line"><span class="string">                        this.$store.dispatch("</span>setAuthenticated<span class="string">",!this.isEmpty(decoded));</span></span><br><span class="line"><span class="string">                        this.$store.dispatch("</span>setUser<span class="string">",decoded)</span></span><br><span class="line"><span class="string">						</span></span><br><span class="line"><span class="string">                            this.$router.push('/index');</span></span><br><span class="line"><span class="string">                        &#125;)</span></span><br><span class="line"><span class="string">                        .catch(err=&gt;&#123;</span></span><br><span class="line"><span class="string">                            this.$message(&#123;</span></span><br><span class="line"><span class="string">                                message:"</span>登陆失败<span class="string">"</span></span><br><span class="line"><span class="string">                            &#125;)</span></span><br><span class="line"><span class="string">                        &#125;);</span></span><br><span class="line"><span class="string">                    </span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">            &#125;)</span></span><br><span class="line"><span class="string">        &#125;,</span></span><br><span class="line"><span class="string">        // 判断值是否为空</span></span><br><span class="line"><span class="string">        isEmpty(value)&#123;</span></span><br><span class="line"><span class="string">            return(</span></span><br><span class="line"><span class="string">                value === undefined||</span></span><br><span class="line"><span class="string">                value===null||</span></span><br><span class="line"><span class="string">                (typeof value==="</span>object<span class="string">" &amp;&amp; Object.keys(value).length === 0)||</span></span><br><span class="line"><span class="string">                (typeof value==="</span>string<span class="string">" &amp;&amp; value.trim().length === 0)</span></span><br><span class="line"><span class="string">            )</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;style scoped&gt;</span></span><br><span class="line"><span class="string">    .login&#123;</span></span><br><span class="line"><span class="string">        position: relative;</span></span><br><span class="line"><span class="string">        width: 100%;</span></span><br><span class="line"><span class="string">        height: 100%;</span></span><br><span class="line"><span class="string">        background:url("</span>../assets/images/bg.jpg<span class="string">");</span></span><br><span class="line"><span class="string">        background-size: 100% 100%;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .form_container&#123;</span></span><br><span class="line"><span class="string">        width: 370px;</span></span><br><span class="line"><span class="string">        height: 210px;</span></span><br><span class="line"><span class="string">        position: absolute;</span></span><br><span class="line"><span class="string">        top: 10%;</span></span><br><span class="line"><span class="string">        left: 34%;</span></span><br><span class="line"><span class="string">        padding: 25px;</span></span><br><span class="line"><span class="string">        border-radius: 5px;</span></span><br><span class="line"><span class="string">        text-align: center;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .form_container .manage_tip .title&#123;</span></span><br><span class="line"><span class="string">        font-family: 'Microsoft YaHei';</span></span><br><span class="line"><span class="string">        font-weight: bold;</span></span><br><span class="line"><span class="string">        font-size: 26px;</span></span><br><span class="line"><span class="string">        color: #fff;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    /* 表单样式 */</span></span><br><span class="line"><span class="string">    .loginForm&#123;</span></span><br><span class="line"><span class="string">        margin-top:20px;</span></span><br><span class="line"><span class="string">        background-color:#fff;</span></span><br><span class="line"><span class="string">        padding:20px 40px 20px 20px;</span></span><br><span class="line"><span class="string">        border-radius:5px;</span></span><br><span class="line"><span class="string">        box-shadow:0px 5px 10px #cccc;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    .loginBtn&#123;</span></span><br><span class="line"><span class="string">        width:100%;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&lt;/style&gt;</span></span><br></pre></td></tr></table></figure>

<p>需要注意的是，主页/index 只有登录之后才能被用户浏览到，即使手动输入localhost:8080/index 也不能访问到。我们需要在 路由文件内加上路由守卫 <code>router.beforeEach</code></p>
<h2 id="路由文件"><a href="#路由文件" class="headerlink" title="路由文件:"></a>路由文件:</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> Index <span class="keyword">from</span> <span class="string">'../views/index.vue'</span></span><br><span class="line"><span class="keyword">import</span> Register <span class="keyword">from</span> <span class="string">'../views/Register.vue'</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'../views/Home.vue'</span></span><br><span class="line"><span class="keyword">import</span> infoShow <span class="keyword">from</span> <span class="string">'../views/infoShow.vue'</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path:<span class="string">"/"</span>,</span><br><span class="line">    redirect: <span class="string">"/index"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path:<span class="string">"/index"</span>,</span><br><span class="line">    name: <span class="string">"index"</span>,</span><br><span class="line">    component:Index,</span><br><span class="line">    children:[</span><br><span class="line">      &#123;<span class="attr">path</span>:<span class="string">""</span>,<span class="attr">component</span>:Home&#125;,</span><br><span class="line">      &#123;<span class="attr">path</span>:<span class="string">"/home"</span>,<span class="attr">name</span>:<span class="string">"home"</span>,<span class="attr">component</span>:Home&#125;,</span><br><span class="line">      &#123;<span class="attr">path</span>:<span class="string">"/infoshow"</span>,<span class="attr">name</span>:<span class="string">"infoshow"</span>,<span class="attr">component</span>:infoShow&#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path:<span class="string">"/register"</span>,</span><br><span class="line">    name: <span class="string">"register"</span>,</span><br><span class="line">    component:Register</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path:<span class="string">"*"</span>,</span><br><span class="line">    name: <span class="string">"/404"</span>,</span><br><span class="line">    component:<span class="function"><span class="params">()</span>=&gt;</span><span class="keyword">import</span>(<span class="string">"../views/404.vue"</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path:<span class="string">"/login"</span>,</span><br><span class="line">    name: <span class="string">"login"</span>,</span><br><span class="line">    component:<span class="function"><span class="params">()</span>=&gt;</span><span class="keyword">import</span>(<span class="string">"../views/Login.vue"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  mode: <span class="string">'history'</span>,</span><br><span class="line">  base: process.env.BASE_URL,</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to,<span class="keyword">from</span>,next</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> isLogin = localStorage.eletoken;</span><br><span class="line">  <span class="comment">// 如果是登录页 或者 注册页，可以直接访问。如果是登录之后才能显示的首页则需要判断是否有存储在localStorage中的eletoken</span></span><br><span class="line">  <span class="keyword">if</span>(to.path == <span class="string">'/login'</span> || to.path == <span class="string">'/register'</span>)&#123;</span><br><span class="line">    next();</span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="comment">// 判断是否存在？在即下一页。不在即跳转到登录页</span></span><br><span class="line">    isLogin?next():next(<span class="string">'/login'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>

<p>因为我们加入了token并且设置了token有效期，那么如果token失效，我们会提示用户重新登陆，并跳转到登录页。在内部我们需要清除localStorage中的eletoken 和Vuex中state关于user的信息。</p>
<p>我们设置了请求和响应拦截函数，其中为请求和响应设置了跳转动画，增强页面友好性，另外 通过<code>axios.interceptors</code> 增加了异步请求和响应的拦截，请求时判断是否正确登陆，即是否有token，那么为所有首页数据请求增加请求头，增加token值（首页之后的内容只有登录了才能看到），响应请求时判断如果有返回错误是否是token失效（401），那么需要提示用户重新登陆。</p>
<h2 id="网络请求拦截http-js"><a href="#网络请求拦截http-js" class="headerlink" title="网络请求拦截http.js"></a>网络请求拦截http.js</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">import</span> &#123;Message,Loading&#125; <span class="keyword">from</span> <span class="string">'element-ui'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> Load;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">startLoading</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    Load = Loading.service(&#123;</span><br><span class="line">        lock:<span class="literal">true</span>,</span><br><span class="line">        text:<span class="string">"拼命加载中"</span>,</span><br><span class="line">        background:<span class="string">'rgba(0,0,0,0.7)'</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">endLoading</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    Load.close(); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">axios.interceptors.request.use(<span class="function"><span class="params">config</span>=&gt;</span>&#123;</span><br><span class="line">    startLoading();</span><br><span class="line">    <span class="comment">// 发起请求的时候，如果有 token。为所有响应头加上 Authorization</span></span><br><span class="line">    <span class="keyword">if</span>(localStorage.eletoken)&#123;</span><br><span class="line">        config.headers.Authorization = localStorage.eletoken;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">&#125;,err=&gt;&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">axios.interceptors.response.use(<span class="function"><span class="params">response</span>=&gt;</span>&#123;</span><br><span class="line">    endLoading();</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">&#125;,err=&gt;&#123;</span><br><span class="line">    <span class="comment">// 错误提示</span></span><br><span class="line">    endLoading();</span><br><span class="line">    Message.error(err.response.data);</span><br><span class="line">    <span class="comment">// 响应拦截的时候，对返回的错误码进行判断，如果是401，即token过期</span></span><br><span class="line">    <span class="keyword">if</span>(err.response.status == <span class="number">401</span>)&#123;</span><br><span class="line">        Message.error(<span class="string">'token失效请重新登陆'</span>)</span><br><span class="line">        <span class="comment">// 清除token</span></span><br><span class="line">        localStorage.removeItem(<span class="string">"eletoken"</span>);</span><br><span class="line">        router.push(<span class="string">'/login'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> axios;</span><br></pre></td></tr></table></figure>

<p>到目前为止 分别有根组件App.vue、路有文件、网络请求文件中都对token进行了操作。</p>
<h2 id="系统展示页"><a href="#系统展示页" class="headerlink" title="系统展示页"></a>系统展示页</h2><ol>
<li><p>404错误页</p>
<p>除了设定的几个路由，如果用户不慎点了错误的地址，都会显示404页面。</p>
<p>在路有文件中设定路由规则即可：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   path:<span class="string">"*"</span>,</span><br><span class="line">   name: <span class="string">"/404"</span>,</span><br><span class="line">   component:<span class="function"><span class="params">()</span>=&gt;</span><span class="keyword">import</span>(<span class="string">"../views/404.vue"</span>)</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure>

<p>404页面：</p>
<p>用了一张404图片简单展示</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"notfound"</span>&gt;</span><br><span class="line">        &lt;img src=<span class="string">"../assets/images/404.jpg"</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>template&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    .notfound&#123;</span><br><span class="line">        width:<span class="number">100</span>%;</span><br><span class="line">        height:<span class="number">100</span>%;</span><br><span class="line">        overflow:hidden;</span><br><span class="line">    &#125;</span><br><span class="line">    .notfound img&#123;</span><br><span class="line">        width:<span class="number">100</span>%;</span><br><span class="line">        height:<span class="number">100</span>%;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<p>2.home页</p>
<p>也是一进入的展示页，即/ , /index 需要 重定向到的地址</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"home"</span>&gt;</span><br><span class="line">        &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"container"</span>&gt;</span><br><span class="line">            &lt;h1 <span class="class"><span class="keyword">class</span></span>=<span class="string">"title"</span>&gt;SUN UGG查询友好系统&lt;<span class="regexp">/h1&gt;</span></span><br><span class="line"><span class="regexp">            &lt;p class="lead"&gt;专注于进出口货物流通创造GDP&lt;/</span>p&gt;</span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">export default &#123;</span></span><br><span class="line"><span class="regexp">    name:"home"</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">    .home&#123;</span><br><span class="line">        width: <span class="number">100</span>%;</span><br><span class="line">        height: <span class="number">100</span>%;</span><br><span class="line">        background: url(<span class="string">"../assets/images/bg2.jpg"</span>);</span><br><span class="line">        background-size: <span class="number">100</span>% <span class="number">100</span>%;</span><br><span class="line">    &#125;</span><br><span class="line">    .container&#123;</span><br><span class="line">        width: <span class="number">100</span>%;</span><br><span class="line">        height: <span class="number">100</span>%;</span><br><span class="line">        box-sizing: border-box;</span><br><span class="line">        padding-top: <span class="number">100</span>px;</span><br><span class="line">        background-color: rgba(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.7</span>);</span><br><span class="line">        text-align: center;</span><br><span class="line">        color: #fff;</span><br><span class="line">    &#125;</span><br><span class="line">    .title&#123;</span><br><span class="line">        font-size: <span class="number">30</span>px;</span><br><span class="line">    &#125;</span><br><span class="line">    .lead&#123;</span><br><span class="line">        margin-top: <span class="number">50</span>px;</span><br><span class="line">        font-size: <span class="number">22</span>px;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure>

<p>3.用户信息页 infoshow</p>
<p>作为在home页内部展示的内容，是作为二级路由存在</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"infoshow"</span>&gt;</span><br><span class="line">        &lt;el-row type=<span class="string">"flex"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"row-bg"</span> justify=<span class="string">"center"</span>&gt;</span><br><span class="line">            &lt;el-col :span=<span class="string">"8"</span> &gt;</span><br><span class="line">                &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"user"</span>&gt;</span><br><span class="line">                    &lt;img src=<span class="string">"../assets/images/avator.jpg"</span> alt=<span class="string">""</span>&gt;</span><br><span class="line">                &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>el-col&gt;</span><br><span class="line">            &lt;el-col :span=<span class="string">"16"</span>&gt;</span><br><span class="line">                &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"userinfo"</span>&gt;</span><br><span class="line">                    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"user-item"</span>&gt;</span><br><span class="line">                        &lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"el-icon-user-solid"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line">                        &lt;span&gt;&#123;&#123;user.name&#125;&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>div&gt;</span><br><span class="line">                    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"user-item"</span>&gt;</span><br><span class="line">                        &lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"el-icon-s-tools"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span></span><br><span class="line">                        &lt;span&gt;&#123;&#123;user.identity==<span class="string">"manager"</span>?<span class="string">"管理员"</span>:<span class="string">"员工"</span>&#125;&#125;&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">                    &lt;/</span>div&gt;</span><br><span class="line">                &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>el-col&gt;   </span><br><span class="line">        &lt;<span class="regexp">/el-row&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">export default &#123;</span></span><br><span class="line"><span class="regexp">    name:"infoshow",</span></span><br><span class="line"><span class="regexp">    computed: &#123;</span></span><br><span class="line"><span class="regexp">        user()&#123;</span></span><br><span class="line"><span class="regexp">            return this.$store.getters.user;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">    .infoshow&#123;</span><br><span class="line">        width: <span class="number">100</span>%;</span><br><span class="line">        height: <span class="number">100</span>%;</span><br><span class="line">        box-sizing: border-box;</span><br><span class="line">    &#125;</span><br><span class="line">    .row-bg&#123;</span><br><span class="line">        width: <span class="number">100</span>%;</span><br><span class="line">        height: <span class="number">100</span>%;</span><br><span class="line">    &#125;</span><br><span class="line">    .user&#123;</span><br><span class="line">        text-align: center;</span><br><span class="line">        position:relative; </span><br><span class="line">        top:<span class="number">30</span>%;</span><br><span class="line">    &#125;</span><br><span class="line">    .user img&#123;</span><br><span class="line">        width: <span class="number">150</span>px;</span><br><span class="line">        border-radius: <span class="number">50</span>%;</span><br><span class="line">    &#125;</span><br><span class="line">    .user span&#123;</span><br><span class="line">        display: block;</span><br><span class="line">        text-align: center;</span><br><span class="line">        margin-top: <span class="number">20</span>px;</span><br><span class="line">        font-size: <span class="number">20</span>px;</span><br><span class="line">        font-weight: bold;</span><br><span class="line">    &#125;</span><br><span class="line">    .userinfo&#123;height: 100%;background-color: #eee;&#125;</span><br><span class="line">    .user-item&#123;</span><br><span class="line">        position: relative;</span><br><span class="line">        top: <span class="number">30</span>%;</span><br><span class="line">        padding: <span class="number">26</span>px;</span><br><span class="line">        font-size: <span class="number">28</span>px;</span><br><span class="line">        color: #333;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure>

<p>4.数据信息展示页</p>
<p>和infoshow页一样，作为home页的二级路由，因为都是在home页单页面展示，并不会跳转</p>
<p>图片展示</p>
<p>1.登录<img src="https://i.loli.net/2020/02/05/dz8jguCMXy6eopA.png" alt="登录"></p>
<p>2.注册<img src="https://i.loli.net/2020/02/05/jam2VZT1rx43MQU.png" alt="注册"></p>
<p>3.进入之后的首页<img src="https://i.loli.net/2020/02/05/cxjhXpI5Gz9HUFq.png" alt="首页"></p>
<p>4.用户信息页</p>
<p><img src alt="infoshow"></p>
<p><img src="https://i.loli.net/2020/02/05/lmONYPWZaHxGCi5.png" alt="1580911554337"></p>
</div><div class="post-copyright"><blockquote><p>原文作者: zyw1988</p><p>原文链接: <a href="http://zyw1988.github.io/2019/12/02/node资金系统/">http://zyw1988.github.io/2019/12/02/node资金系统/</a></p><p>版权声明: 转载请注明出处(必须保留作者署名及链接)</p></blockquote></div><div class="tags"></div><div class="post-share"><div class="social-share"><span>分享到:</span></div></div><div class="post-nav"><a href="/2019/12/03/mongodb初识/" class="pre">mongodb初识</a><a href="/2019/12/01/mySQL初识/" class="next">mySQL初识</a></div><div id="comments"><div id="container"><script type="text/javascript" src="https://unpkg.com/gitalk/dist/gitalk.min.js?v=2.0.4"></script><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=2.0.4"></script><script>var gitalk = new Gitalk({
  clientID: '03369e74b2b1b1d432b2',
  clientSecret: '863fe5e810a4ef50883fc80e324db91e1c2b2376',
  repo: 'https://github.com/zyw1988/blogcomments',
  owner: 'zyw1988## Your GitHub ID, e.g. username',
  admin: [''],
  id: md5(window.location.pathname),
  distractionFreeMode: false,
  language: 'zh-CN',
  pagerDirection: 'last'
})
gitalk.render('container')</script></div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-实现的功能-和接口"><span class="toc-text">1.实现的功能 和接口</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-后端文件："><span class="toc-text">2.后端文件：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-用户功能："><span class="toc-text">2.用户功能：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-注册"><span class="toc-text">1.注册</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-登录"><span class="toc-text">2.登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-知识盲区"><span class="toc-text">3.知识盲区</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-jsonwebtoken的使用"><span class="toc-text">1.jsonwebtoken的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-POST获取参数的中间件body-parser使用"><span class="toc-text">2.POST获取参数的中间件body-parser使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MongoDB数据存储部分"><span class="toc-text">MongoDB数据存储部分</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#后台主函数app-js"><span class="toc-text">后台主函数app.js</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-前端文件"><span class="toc-text">3.前端文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#配置文件："><span class="toc-text">配置文件：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#入口函数部分main-js："><span class="toc-text">入口函数部分main.js：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#根组件App-vue"><span class="toc-text">根组件App.vue</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#页面展示views"><span class="toc-text">页面展示views</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-注册页"><span class="toc-text">1.注册页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-登录页"><span class="toc-text">2.登录页</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#路由文件"><span class="toc-text">路由文件:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#网络请求拦截http-js"><span class="toc-text">网络请求拦截http.js</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#系统展示页"><span class="toc-text">系统展示页</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/01/02/同时执行多个命令语句的concurrently/">同时执行多个命令语句的concurrent</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/12/29/测试初级/">测试初级</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/12/05/bcrypt初识/">bcrypt初识</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/12/03/mongodb初识/">mongodb初识</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/12/02/node资金系统/">node资金系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/12/01/mySQL初识/">mySQL初识</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/11/28/node-服务器开启/">node-服务器开启</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/18/CCSS之大坑/">CCSS之大坑</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/16/canvas做画板/">canvas做画板</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/10/15/CSS选择器之表单样式中的妙用/">CSS选择器之表单样式中的妙用</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/promise/" style="font-size: 15px;">promise</a> <a href="/tags/github个人主页搭建/" style="font-size: 15px;">github个人主页搭建</a> <a href="/tags/字体/" style="font-size: 15px;">字体</a> <a href="/tags/CSS/" style="font-size: 15px;">CSS</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/移动端组件/" style="font-size: 15px;">移动端组件</a> <a href="/tags/公开课/" style="font-size: 15px;">公开课</a> <a href="/tags/canvas/" style="font-size: 15px;">canvas</a> <a href="/tags/hexo/" style="font-size: 15px;">hexo</a> <a href="/tags/移动端/" style="font-size: 15px;">移动端</a> <a href="/tags/slot/" style="font-size: 15px;">slot</a> <a href="/tags/组件库/" style="font-size: 15px;">组件库</a> <a href="/tags/VUE/" style="font-size: 15px;">VUE</a> <a href="/tags/初级/" style="font-size: 15px;">初级</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/笔记/" style="font-size: 15px;">笔记</a> <a href="/tags/vue/" style="font-size: 15px;">vue</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/">2019</a><span class="archive-list-count">35</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |  <a href="/atom.xml">订阅本站</a> |  <a href="/about/">联系博主</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次，本站总访客数:<i id="busuanzi_container_site_uv"><i id="busuanzi_value_site_uv"></i></i>人</p><p><span> Copyright &copy;<a href="/." rel="nofollow">zyw1988.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script type="text/javascript" src="/js/search.json.js?v=2.0.4"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.4" async></script><link rel="stylesheet" type="text/css" href="/share/css/share.css"><script type="text/javascript" src="/share/js/social-share.js" charset="utf-8"></script><script type="text/javascript" src="/share/js/qrcode.js" charset="utf-8"></script></body></html>